<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHRISTMAS SLOT</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            flex-direction: column;
        }
        .slot-machine {
            background-color: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            width: 300px;
        }
        h1 {
            color: #91496d;
            font-size: 36px;
        }
        .slot-reels {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        .reel {
            width: 80px;
            height: 80px;
            background-color: #e6e6e6;
            border-radius: 10px;
            font-size: 32px;
            color: #ff66b2;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
        }
        .button {
            background-color: #91496d;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 20px;
        }
        .button:hover {
            background-color: #91496d;
        }
        .result {
            margin-top: 20px;
            font-size: 16px; /* çå‹µæç¤ºæ–‡å­—ç¸®å° */
            font-weight: bold;
            color: #333;
        }
        .countdown {
            font-size: 18px;
            color: #91496d;
            margin-top: 20px;
        }
        .instructions {
            font-size: 12px; /* èªªæ˜æ–‡å­—ç¸®å° */
            color: #333;
            margin-bottom: 20px;
            text-align: left;
        }
        .replay-button {
            background-color: #91496d;
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 16px;
            border-radius: 10px;
            cursor: pointer;
            margin-top: 20px;
            display: none; /* åˆå§‹éš±è—ï¼Œå†ç©ä¸€æ¬¡æŒ‰éˆ• */
        }
        .replay-button:hover {
            background-color: #91496d;
        }
    </style>
</head>
<body>
    <div class="slot-machine">
        <h1>CHRISTMAS SLOT</h1>
        <div class="instructions">
            <p>èªªæ˜:</p>
            <ul>
                <li>3å€‹æ„›å¿ƒ â¤ï¸ = çé‡‘ + 520å…ƒ</li>
                <li>2å€‹æ„›å¿ƒ â¤ï¸ = çé‡‘  - 520å…ƒ</li>
                <li>3å€‹è˜‹æœ ğŸ = å†ç©ä¸€æ¬¡æŠ½çï¼Œçµæœå–é«˜è€…</li>
                <li>2å€‹è˜‹æœ ğŸ = å†ç©ä¸€æ¬¡æŠ½çï¼Œçµæœå–æœ€æ–°</li>
                <li>3å€‹æª¸æª¬ ğŸ‹ = å†æŠ½å…©å¼µç‰Œ</li>
                <li>3å€‹è‘¡è„ ğŸ‡ = å†æŠ½ä¸€å¼µç‰Œ</li>
            </ul>
        </div>
        <div class="slot-reels">
            <div class="reel" id="reel-1"><p>ğŸ</p></div>
            <div class="reel" id="reel-2"><p>ğŸ‡</p></div>
            <div class="reel" id="reel-3"><p>ğŸ‹</p></div>
        </div>
        <button class="button" id="spin-btn">START</button>
        <button class="replay-button" id="replay-btn">å†ç©ä¸€æ¬¡</button>
        <div class="result" id="result"> </div>
        <div class="countdown" id="countdown">å‰©é¤˜æŠ½çæ¬¡æ•¸: <span id="remaining-count">5</span></div>
    </div>

    <script>
        const symbols = ['ğŸ', 'ğŸ‡', 'ğŸ‹', 'â¤ï¸']; // å››å€‹ç¬¦è™Ÿ
        const maxSpins = 5; // åˆå§‹æŠ½çæ¬¡æ•¸
        let remainingSpins = maxSpins; // å‰©é¤˜æŠ½çæ¬¡æ•¸
        let latestPrize = 0; // ä¿å­˜æœ€æ–°ä¸€æ¬¡çš„çµæœ
        let isReplay = false; // æ¨™è¨˜æ˜¯å¦æ˜¯é‡æ–°æŠ½ç

        // æŒ‰éˆ•é»æ“Šäº‹ä»¶ï¼Œå•Ÿå‹•è½‰å‹•
        document.getElementById('spin-btn').addEventListener('click', spin);
        document.getElementById('replay-btn').addEventListener('click', restartGame); // å†ç©ä¸€æ¬¡çš„æŒ‰éˆ•

        // spin å‡½æ•¸ï¼šè™•ç†æ—‹è½‰å‹•ç•«å’Œçµæœ
        function spin() {
            if (remainingSpins <= 0 && !isReplay) {
                // ç•¶å‰©é¤˜æ¬¡æ•¸ç”¨å®Œï¼Œé¡¯ç¤ºã€Œå†ç©ä¸€æ¬¡ã€æŒ‰éˆ•
                document.getElementById('replay-btn').style.display = 'block';
                return;
            }

            // å¦‚æœæ˜¯å†ç©ä¸€æ¬¡ï¼Œå…ˆæ›´æ–°ç‚ºæ–°çš„ä¸€è¼ª
            if (isReplay) {
                isReplay = false;
            }

            // æ›´æ–°å‰©é¤˜æŠ½çæ¬¡æ•¸
            remainingSpins--;
            document.getElementById('remaining-count').textContent = remainingSpins;

            // éš±è—çµæœ
            document.getElementById('result').textContent = '';

            // å–å¾—ä¸‰å€‹æ»¾è¼ª
            const reels = document.querySelectorAll('.reel');
            const result = [];

            // éš¨æ©Ÿç”Ÿæˆä¸‰å€‹ç¬¦è™Ÿä¸¦é¡¯ç¤º
            for (let i = 0; i < reels.length; i++) {
                const randomSymbol = getRandomSymbol();
                reels[i].innerHTML = `<p>${randomSymbol}</p>`;
                result.push(randomSymbol);
            }

            // çµ¦ç”¨æˆ¶ä¸€äº›å‹•ç•«æ•ˆæœ
            document.getElementById('spin-btn').disabled = true; // ç¦ç”¨æŒ‰éˆ•
            setTimeout(() => {
                // æª¢æŸ¥çµæœ
                handleResult(result);
                document.getElementById('spin-btn').disabled = false; // æ¢å¾©æŒ‰éˆ•
            }, 1000);
        }

        // éš¨æ©Ÿé¸æ“‡ç¬¦è™Ÿ
        function getRandomSymbol() {
            const randomIndex = Math.floor(Math.random() * symbols.length);
            return symbols[randomIndex];
        }

        // è™•ç†æŠ½ççµæœ
        function handleResult(result) {
            const symbolCounts = countSymbols(result);
            let prize = 0;

            if (symbolCounts['â¤ï¸'] === 3) {
                document.getElementById('result').textContent = 'ä¸‰å€‹æ„›å¿ƒï¼çé‡‘ +520å…ƒ';
            } else if (symbolCounts['â¤ï¸'] === 2) {
                document.getElementById('result').textContent = 'äºŒå€‹æ„›å¿ƒï¼çé‡‘ -520å…ƒ';
            } else if (symbolCounts['ğŸ'] === 3) {
                document.getElementById('result').textContent = 'ä¸‰å€‹è˜‹æœï¼å†ç©ä¸€æ¬¡æŠ½çï¼Œçµæœå–é«˜è€…';
            } else if (symbolCounts['ğŸ'] === 2) {
                document.getElementById('result').textContent = 'äºŒå€‹è˜‹æœï¼å†ç©ä¸€æ¬¡æŠ½çï¼Œçµæœå–æœ€æ–°';
            } else if (symbolCounts['ğŸ‹'] === 3) {
                document.getElementById('result').textContent = 'ä¸‰å€‹æª¸æª¬ï¼å†æŠ½äºŒå¼µç‰Œ'; 
            } else if (symbolCounts['ğŸ‡'] === 3) {
                document.getElementById('result').textContent = 'ä¸‰å€‹è‘¡è„ï¼å†æŠ½ä¸€å¼µç‰Œ';
            }

            updateCountdown();
        }

        // è¨ˆç®—æ¯å€‹ç¬¦è™Ÿå‡ºç¾çš„æ¬¡æ•¸
        function countSymbols(result) {
            const counts = { 'ğŸ': 0, 'ğŸ‡': 0, 'ğŸ‹': 0, 'â¤ï¸': 0 };
            result.forEach(symbol => counts[symbol]++);
            return counts;
        }

        // æ›´æ–°å€’æ•¸è¨ˆæ™‚
        function updateCountdown() {
            document.getElementById('remaining-count').textContent = remainingSpins;
        }

        // å†ç©ä¸€æ¬¡ï¼Œé‡ç½®éŠæˆ²
        function restartGame() {
            remainingSpins = maxSpins;
            document.getElementById('remaining-count').textContent = remainingSpins;
            document.getElementById('replay-btn').style.display = 'none'; // éš±è—å†ç©ä¸€æ¬¡æŒ‰éˆ•
            document.getElementById('result').textContent = ''; // æ¸…ç©ºçµæœ
            document.querySelectorAll('.reel').forEach(reel => reel.innerHTML = '<p>ğŸ</p>'); // é‡è¨­æ»¾è¼ª
        }
    </script>
</body>
</html>
